<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="/fragments/common.html :: header('챌린지 상세 내용')">
<body>
	<nav th:replace="/fragments/common.html :: nav"></nav>
	<div th:replace="/fragments/common.html :: back('/challenge/my-challenge')"></div>			
	<!-- 챌린지 세부 사항 -->
	<table>
		<tr>
			<td>챌린지 이름: </td>
			<td th:text="${personalChallenge.challengeName}"></td>
			<td><a
				th:if="${personalChallenge.isCompleted} == 0"
				th:data-cNum="${personalChallenge.challengeNum}"
				onclick="return fn_feed_duplicate_check(this.getAttribute('data-cNum'))" 
				th:href="@{/challenge/feed/{challengeNum}/set (challengeNum = ${personalChallenge.challengeNum})}">
				피드 쓰기</a>
			</td>
		</tr>
		<tr>
			<td>완료 여부: </td>
			<td th:if="${personalChallenge.isCompleted} == 1">완료</td>
			<td th:unless="${personalChallenge.isCompleted} == 1">진행 중</td>
		</tr>
		<tr><td>시작: </td><td th:text="${personalChallenge.startDate}"></td></tr>
		<tr><td>종료: </td><td th:text="${personalChallenge.endDate}"></td></tr>
		<tr><td>기간: </td><td th:text="${personalChallenge.period}"></td></tr>
		<tr><td>실천 횟수: </td><td th:text="${personalChallenge.executionNum}"></td></tr>
		<tr><td>달성률: </td><td th:text="|${personalChallenge.achievementRate}%|"></td></tr>				
	</table>
	
	<!-- Calendar -->
	<div>
		<div th:each="weeks : ${personalChallenge.calList}">
			<span 
				th:each="days : ${weeks}" 
				th:text="${days}" 
				th:style="${days} == '0' ? 'background-color: #DDE5EF' : 'background-color: ' + ${personalChallenge.colorCode}">
			</span>
		</div>
	</div><br>
				
	<div>
		<table>
			<tr><td th:if="${personalChallenge.isCompleted} == 0">
				<form
					th:action="@{/challenge/my-challenge/{challengeNum}/edit (challengeNum=${personalChallenge.challengeNum})}">
					<input type="submit" value="수정하기" />
				</form>
			</td><td>
				<form
					id="deleteForm"
					onsubmit="return fn_delete_confirm()"
					th:action="@{/challenge/my-challenge/{challengeNum} (challengeNum=${personalChallenge.challengeNum})}" 
					th:method="delete">
					<input type="submit" value="삭제하기" />
				</form>
			</td></tr>
		</table>
	</div>
	
	<!-- 피드 리스트 -->
	<div>
		<div>
			<a th:href="@{/challenge/feed/{challengeNum} (challengeNum = ${personalChallenge.challengeNum})}">피드 보기</a>
		</div>
	</div>
	
	<!-- footer -->	
	<nav th:replace="/fragments/common.html :: footer"></nav>	
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script>
//여기에 이 코드를 쓰기 위해선 loginForm.html에도 위 쿠키 라이브러리르 추가해 주어야합니다.
$(function(){
	var blank=$.cookie("blanked");
 	var login=$.cookie("logined"); 
 	var logout=$.cookie("logouted"); 
		$("#loginBlankDiv1").html(blank);
		$("#loginBlankDiv2").html(blank);
 		$("#nicknameDiv").html(login);
 		$("#logoutDiv").html(logout);
});

</script>
</html>